# Claude Code 指南 - 第一章：核心概念

> **🧑‍💻 从这里开始**：Claude Code 新手？请先阅读[核心能力](#核心-claude-code-能力)，然后了解[权限模型](#权限模型)，并设置您的第一个[CLAUDE.md](#项目上下文-claudemd)。

[↑ 返回顶部](#快速导航)

## 核心 Claude Code 能力

Claude Code 通过自然对话和直接操作工作：

```bash
# Claude Code 的功能：
- 根据纯英文描述构建功能
- 通过分析代码库调试和修复问题
- 导航和理解整个项目结构
- 自动化常见开发任务
- 直接编辑文件和运行命令

# 核心能力：
功能构建 → "创建用户认证系统"
→ 分析需求、制定计划、编写代码

调试 → "修复支付处理错误"
→ 调查日志、追踪问题、实施修复

代码库分析 → "审查此代码的安全问题"
→ 检查代码、识别漏洞、提出改进建议

自动化 → "修复项目中的所有 lint 问题"
→ 识别问题、自动应用修复

# 工作原理：
- 在终端中直接对话
- 可以直接编辑文件
- 根据需要运行命令
- 创建提交并管理 git
- 维护项目上下文
- 支持外部集成（MCP）

# 集成功能：
- 自动化钩子
- 工作流斜杠命令
- 程序化使用 SDK
- 专业任务的子代理
- IDE 集成
```

**关键理解**：Claude Code 通过自然语言交互工作，根据您的要求直接编辑文件和运行命令。不需要特殊语法 - 只需描述您的需求。

## 多模态能力

智能处理不同类型的内容：

```bash
# 文本/代码文件
- 阅读和分析任何编程语言
- 理解上下文和模式
- 生成适当的解决方案

# 图像
- 截图：读取 UI、错误、设计
- 图表：理解架构、流程
- 数据图：解释数据和趋势
- 照片：提取相关信息

# 文档
- PDF：提取和分析内容
- Markdown：完全理解和生成
- JSON/YAML：解析和生成配置
- CSV：理解数据结构

# 组合分析
"这是错误的截图" → 读取错误、建议修复
"这个图表显示了我们的架构" → 理解、提出改进
"这个 PDF 包含需求" → 提取、相应实施
```

**关键理解**：不同的内容类型提供不同的上下文。使用所有可用信息。

## 1. 核心能力

协助任务的基本能力：

```bash
# 信息处理
- 阅读和分析内容（文件、文档、图像）
- 生成新内容（代码、文本、配置）
- 修改现有内容（重构、优化、修复）
- 搜索和模式匹配

# 任务管理
- 分解复杂问题
- 跟踪多步骤任务的进度
- 并行化独立工作
- 跨操作维护上下文

# 执行模式
- 直接实施（当您有访问权限时）
- 指导协助（当用户执行时）
- 研究和分析
- 审查和验证
```

**关键理解**：在进行更改之前理解现有上下文。高效处理多个相关更改。

## 2. 权限模型

您在增量信任下操作：

```bash
# 权限流程
1. 从最小权限开始（只读）
2. 为每个新操作类型请求权限
3. 通过成功操作建立信任
4. 会话特定权限

# 信任建立模式
读取/分析 → 最初总是安全的
修改/写入 → 先显示更改
执行 → 解释将要发生什么
敏感操作 → 额外确认
```

**关键理解**：权限保护您和用户。只请求所需的权限。

## 3. 项目上下文（CLAUDE.md）

每个项目都可以有一个提供基本上下文的 CLAUDE.md 文件：

```markdown
# CLAUDE.md 中期望的内容
- 主要语言和框架
- 代码风格偏好
- 测试要求
- 常用命令（lint、test、build）
- 项目特定模式
- 重要约束或规则
```

**关键理解**：始终检查 CLAUDE.md - 这是您的项目手册。

## 内存管理和 CLAUDE.md 更新

更新项目内存时，确保它们为您自己的理解而优化：

```bash
# 智能内存更新模式
更新 CLAUDE.md 时：

AI 优化内存的要求：
1. 使用直接、可操作的语言（无废话）
2. 专注于特定于此代码库的模式和陷阱
3. 包含有效的确切命令（使用正确标志）
4. 记录哪些方法不起作用（避免未来的尝试）
5. 使用清晰的部分标题以便快速扫描
6. 保持条目简洁但完整

风格指南：
- 动作以动词开头："在 Y 时使用 X"
- 用 ⚠️ 高亮警告
- 用 🔴 标记关键信息
- 对所有命令/路径使用代码块
- 将相关信息分组

# 内存质量验证
更新后，验证：
1. 清晰度 - 这会在下次会话中正确指导您吗？
2. 完整性 - 是否捕获了所有关键学习？
3. 准确性 - 命令和路径是否正确？
4. 效率 - 是否简洁而不丢失重要细节？
5. 优化 - 是否符合您的认知风格？
```

## 自动化内存管理模式

```bash
# 内存更新工作流
# 在重要工作后触发

更新项目内存时：
1. 分析会话学习
2. 提取发现的关键模式
3. 记录成功的方法
4. 记录要避免的失败尝试
5. 更新命令参考
6. 保持 AI 优化风格

# 质量验证
验证更新是否：
- 清晰和可操作
- 技术准确
- 认知友好
- 无冗余
```

## 内存管理模式

```bash
# 常见内存操作
- 使用会话学习更新
- 审查和优化现有内存
- 从当前工作中提取学习
- 合并和去重条目
```

## CLAUDE.md 最优召回模板

```markdown
# 项目：[名称]

## 🔴 关键上下文（优先阅读）

## 有效的命令

## 遵循的模式

## ⚠️ 陷阱和不应该做的事情

## 文件结构模式

## 最近的学习

### 4. ROADMAP.md 项目管理
# 项目路线图

## 当前冲刺（第 X-Y 周）

## 即将到来的优先事项

## 最近完成

## 技术债务

### 5. 上下文和会话管理
# 上下文管理模式

### 6. 后台任务和实时监控（新功能）
# 后台执行模式

## 监控和管理

## 实时调试

## 开发 + 监控
# Claude 同时监控两者
# 可以在不停止另一个的情况下修复任何一个

## 自动错误恢复

## 并行验证
# 所有检查同时运行
# Claude 聚合结果并修复问题

### 7. 多目录工作流（新功能）
# 添加目录

## 目录上下文

## Monorepo 模式

## 全栈开发
# 同时监控前端和后端

## 跨项目迁移
# Claude 可以从旧项目读取，写入新项目

## 共享配置
# 从任何项目访问全局配置

### 8. 增强的上下文管理（新功能）
# 微压缩（新功能）

# 保留：当前任务上下文、最近交互、CLAUDE.md
# 清除：旧文件读取、完成的操作、陈旧的上下文

## 何时使用每个：

## 自动优化

## 智能上下文分层
```

---

**本章总结**：本章介绍了 Claude Code 的核心概念，包括基本能力、权限模型、项目上下文管理和内存管理。这些是有效使用 Claude Code 的基础。